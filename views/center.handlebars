<body>
    <div class="row">
        <!-- center name and address -->
        <div class="col-md-6">
            <h2>{{center.centerName}}</h2>
            <p>{{center.centerAddress}}</p>
        </div>
        <!-- add new button -->
    </div>
    <div class="content">
        <div class="container-fluid">
            <div class="row">
                <div class="col-md-12">
                    <div class="card">
                        <div class="toolbar">
                            <!--        Here you can write extra buttons/actions for the toolbar              -->
                            <div class="col-md-3">
                                <button type="button" class="btn btn-fill btn-info" id="button-create" data-toggle='modal' data-target='#modal--create'>Add New Tenant</button>
                            </div>
                        </div>
                        <table id="bootstrap-table" class="table table-striped">
                            <thead>
                                <th data-field="state" data-checkbox="true"></th>
                                <th data-field="tenantName" class="text-center" data-sortable="true">Tenant</th>
                                <th data-field="tenantSF" data-sortable="true">SF</th>
                                <th data-field="leaseStart" data-sortable="true">Start</th>
                                <th data-field="leaseEnd" data-sortable="true">Expiration</th>
                                <th data-field="basePSF" data-sortable="true">BasePSF</th>
                                <th data-field="camPSF" data-sortable="true">CamPSF</th>
                                <th data-field="totalPSF" data-sortable="true">TotalPSF</th>
                                <th data-field="totalAnnual" data-sortable="true">Annual Rent</th>
                                <th data-field="salesPSF" data-sortable="true">Sales PSF</th>
                                <th data-field="salesAnnual" data-sortable="true">Annual Sales</th>
                                <th data-field="optionNotice" data-sortable="true">Option Notice</th>
                                <th data-field="optionRent" data-sortable="true">Option Rent</th>
                                <th data-field="actions" class="td-actions text-right" data-events="operateEvents" data-formatter="operateFormatter">Actions</th>
                            </thead>
                            <tbody>
                                {{#each center.Tenants}}
                                <tr>
                                    <td></td>
                                    <td class="tenantName">{{tenantName}}</td>
                                    <td class="tenantSF">{{tenantSF}}</td>
                                    <td>{{leaseStart}}</td>
                                    <td>{{leaseEnd}}</td>
                                    <td>{{basePSF}}</td>
                                    <td>{{camPSF}}</td>
                                    <td>{{totalPSF}}</td>
                                    <td>{{annualRent}}</td>
                                    <td>{{salesPSF}}</td>
                                    <td>{{annualSales}}</td>
                                    <td>{{noticeDate}}</td>
                                    <td>{{noticeRent}}</td>
                                </tr>
                                {{/each}}
                                <div class="table-container-footer">
                                    <table class="table table-striped table-hover table-condensed table-bordered">
                                        <tfoot>
                                            <tr class="sumRow">
                                                <td></td>
                                                <td>Total SF</td>
                                                <td class="tenantSFsum"></td>
                                            </tr>
                                        </tfoot>
                                    </table>
                                </div>
                            </tbody>
                        </table>
                    </div>
                    <!--  end card  -->
                </div>
                <!-- end col-md-12 -->
            </div>
            <!-- end row -->
        </div>
    </div>
    <!-- Modal for Create Feature -->
    <div class="modal fade" id="modal--create" tabindex="-1" role="dialog" aria-labelledby="modal--create">
        <div class="modal-dialog" role="document">
            <div class="modal-content" style="padding: 20px">
                <div class="modal-body">
                    <div class="panel panel-default">
                        <div class="row ">
                            <div class="panel-body ">
                                <form class="create-update-form" action="/api/{{center.id}}/newTenant" method="POST">
                                    <div class="row">
                                        <legend>Tenant Info</legend>
                                        <!-- hidden center id -->
                                        <input type="hidden" name="centerId" value="{{center}}" />
                                        <!-- tenantName -->
                                        <div class="col-md-6">
                                            <input type="text" placeholder="Tenant Name" id="tenantName" name="tenantName" class="form-control">
                                        </div>
                                        <!-- tenantSF -->
                                        <div class="col-md-6">
                                            <input type="text" placeholder="Square Footage" id="tenantSF" name="tenantSF" class="form-control">
                                        </div>
                                    </div>
                                    <br>
                                    <div class="row">
                                        <legend>Lease Dates</legend>
                                        <!-- leaseStart -->
                                        <div class="col-md-6">
                                            <div class="form-group ">
                                                <input type="text" class="form-control datepicker" id="leaseStart" name="leaseStart" placeholder="Lease Start" />
                                            </div>
                                        </div>
                                        <!-- leaseEnd -->
                                        <div class="col-md-6">
                                            <div class="form-group ">
                                                <input type="text" class="form-control datepicker" id="leaseEnd" name="leaseEnd" placeholder="Lease End" />
                                            </div>
                                        </div>
                                    </div>
                                    <br>
                                    <div class="row">
                                        <legend>Rent and Sales PSF</legend>
                                        <!-- basePSF -->
                                        <div class="col-md-4">
                                            <input type="text" placeholder="Base Rent PSF" id="basePSF" name="basePSF" class="form-control">
                                        </div>
                                        <!-- camPSF -->
                                        <div class="col-md-4">
                                            <input type="text" placeholder="CAM Rent PSF" id="camPSF" name="camPSF" class="form-control">
                                        </div>
                                        <!-- salesPSF -->
                                        <div class="col-md-4">
                                            <input type="text" placeholder="Sales PSF" id="salesPSF" name="salesPSF" class="form-control">
                                        </div>
                                    </div>
                                    <br>
                                    <div class="row">
                                        <legend>Option</legend>
                                        <!-- noticeDate -->
                                        <div class="col-md-6 ">
                                            <div class="form-group ">
                                                <input type="text" class="form-control datepicker" id="noticeDate" name="noticeDate" placeholder="Notice Date" />
                                            </div>
                                        </div>
                                        <!-- noticeRent -->
                                        <div class="col-md-6">
                                            <input type="text" placeholder="Notice Rent" id="noticeRent" name="noticeRent" class="form-control ">
                                        </div>
                                    </div>
                                    <br>
                                    <div class="row">
                                        <!-- close button -->
                                        <button type="button" class="btn btn-danger btn-fill btn-wd" data-dismiss="modal">Close</button>
                                        <!-- submit button -->
                                        <button class="btn btn-success btn-fill btn-wd " method="GET" action="/" type="submit " id="form--event-add">Submit</button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <script type="text/javascript">
        $(document).ready(function() {

            var sum = 0;
            var result = 0;
            var vacant = 0;
            var occupied = 0;

            $('tr').each(function() {

                $(this).find('.tenantName').each(function() {

                    var tenantName = $(this).text();
                    console.log(tenantName);

                    if (tenantName == "Vacant") {

                        result = $(this).closest('td').next().text();
                        vacant += parseFloat(result);
                        sum += parseFloat(result);

                    } else {

                        result = $(this).closest('td').next().text();
                        occupied += parseFloat(result);
                        sum += parseFloat(result);

                    }

                });

                console.log("Sum: " + sum);
                console.log("Vacant: " + vacant);
                console.log("Occupied: " + occupied);

                $('.tenantSFsum', this).html(sum);

            });
        });
        </script>
</body>